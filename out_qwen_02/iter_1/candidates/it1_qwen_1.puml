@startuml
actor 用户 as User

' 软件初始启动时必须执行的初始化设置
User --> (初始化图形编辑器)
(初始化图形编辑器) .> (创建图层) : include
' 启动时默认创建第一个图层
(初始化图形编辑器) .> (设置默认图形选择) : include
' 创建图形选择框默认显示矩形
(初始化图形编辑器) .> (显示页面提示) : include
' 图形提示区域提示“第一页”

usecase (初始化图形编辑器) as "初始化图形编辑器"
usecase (创建图层) as "创建图层"
usecase (设置默认图形选择) as "设置默认图形选择"
usecase (显示页面提示) as "显示页面提示"
usecase (创建图形) as "创建图形"
usecase (选择图形) as "选择图形"
usecase (删除图形) as "删除图形"
usecase (改变图形尺寸) as "改变图形尺寸"
usecase (移动图形) as "移动图形"
usecase (切换图层) as "切换图层"
usecase (管理多个图层) as "管理多个图层"

' 用户通过工具栏选择图形类型并在编辑区绘制
User --> (创建图形)

' 用户在编辑区点击或拖拽来选择一个或多个图形
User --> (选择图形)

' 删除已选中的图形，需先选择再点击删除按钮
User --> (删除图形)
(删除图形) .> (选择图形) : include
' 必须先选择图形才能删除

' 用户拖动控制点或使用放大缩小按钮调整尺寸
User --> (改变图形尺寸)
(改变图形尺寸) .> (选择图形) : include
' 改变尺寸前必须选择图形

' 用户在图形内部拖动实现移动
User --> (移动图形)
(移动图形) .> (选择图形) : include
' 移动前必须选择图形

' 用户点击“新页”按钮创建新图层
User --> (创建图层)
' 创建图层后自动成为当前图层，并重置为矩形选择状态
(创建图层) .> (设置默认图形选择) : include
(创建图层) .> (显示页面提示) : include
' 新图层创建时更新提示区域编号
(创建图层) <-- (图层数未达上限) : extend
' 扩展点：仅当图层数 ≤ 16 时可创建
' 触发条件：用户点击“新页”且图层数 < 16

' 用户点击“下一页”切换图层
User --> (切换图层)
(切换图层) .> (显示页面提示) : include
' 切换后提示当前页编号
(切换图层) .> (设置默认图形选择) : include
' 切换后重置为创建矩形状态
(切换图层) .> (管理多个图层) : include
' 多图层环境下的切换行为

' 管理多个图层包括循环切换逻辑
(管理多个图层) <-- (当前为最后一页则切至第一页) : extend
' 扩展点：当前为最后一页时点击“下一页”
' 触发条件：当前图层是最后一个

' 图形编辑器支持未来扩展更多图形类型
(创建图形) <-- (扩展图形类型) : extend
' 扩展点：创建图形时可新增其他图形（如多边形）
' 触发条件：系统支持新图形类型添加

@enduml
