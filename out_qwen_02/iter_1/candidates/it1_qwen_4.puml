@startuml
actor 用户

'
' 启动时初始化界面和默认状态
'
用户 --> (启动图形编辑器)
(启动图形编辑器) --> (创建初始图层)
' 初始创建第一个图层是必须的步骤
(启动图形编辑器) --> (显示默认创建图形为矩形)
' 创建图形选择框默认显示矩形
(启动图形编辑器) --> (提示第一页)
' 图形提示区域显示“第一页”

'
' 创建图形功能相关用例
'
用户 --> (创建图形)
(创建图形) ..> (选择直线、椭圆或矩形) : <<include>>
' 创建图形前必须选择一种图形类型
(创建图形) ..> (在编辑区域拖拽绘制图形) : <<include>>
' 绘制过程包含确定起始点、拖动、释放终止

'
' 选择图形功能
'
用户 --> (选择图形)
(选择图形) ..> (单击选择单个图形) : <<include>>
' 单击图形内部可选中该图形
(选择图形) ..> (多选叠加图形) : <<include>>
' 叠加嵌套时点击可选择多个图形
(选择图形) ..> (框选区域内图形) : <<include>>
' 按下拖动释放形成虚线矩形，选中内部所有图形
(选择图形) ..> (取消选择所有图形) : <<include>>
' 在空白处点击取消原有选择

'
' 删除图形功能
'
用户 --> (删除所选图形)
(删除所选图形) ..> (选择图形) : <<include>>
' 必须先选择图形才能删除
' 删除操作解除图形与当前图层的隶属关系

'
' 改变图形尺寸功能
'
用户 --> (改变图形尺寸)
(改变图形尺寸) ..> (拖动控制点调整尺寸) : <<include>>
' 选择控制点并拖动实现尺寸变化
(改变图形尺寸) ..> (点击放大按钮) : <<extend>>
' 当用户点击“放大”按钮时，对选中图形进行放大
(改变图形尺寸) ..> (点击缩小按钮) : <<extend>>
' 当用户点击“缩小”按钮时，对选中图形进行缩小

'
' 移动图形功能
'
用户 --> (移动图形)
' 在选中图形内部按下并拖动即可移动
(移动图形) ..> (选择图形) : <<include>>
' 移动前必须已选择图形
' 图形编辑器整体移动时，当前图层图形状态保持不变（系统行为，无需用户交互）

'
' 图层管理功能
'
用户 --> (创建新图层)
' 点击“新页”按钮创建新图层
(创建新图层) ..> (检查图层数量是否超过16) : <<include>>
' 超过16个则禁止创建
(创建新图层) --> (设置新图层为当前图层)
(创建新图层) --> (提示新图层编号)
(创建新图层) --> (重置创建图形为矩形)
' 新图层操作状态恢复为创建矩形

用户 --> (切换图层)
' 点击“下一页”按钮切换图层
(切换图层) --> (选择目标图层作为当前层)
(切换图层) --> (更新图形提示区域编号)
(切换图层) --> (重置创建图形为矩形)
' 切换后操作状态恢复为创建矩形
' 若当前为最后一页，则切换回第一页

'
' 扩展性说明（约束条件）
'
' (创建图形) ..> (扩展支持其他图形类型) : <<extend>>
' 图形编辑器可在创建的图形种类上扩展（预留扩展点）

@enduml
