@startuml
actor 用户 as User

'
' Use Cases
'
usecase "创建图形" as create_shape
usecase "选择图形" as select_shape
usecase "删除图形" as delete_shape
usecase "改变图形尺寸" as resize_shape
usecase "移动图形" as move_shape
usecase "创建图层" as create_layer
usecase "管理图层" as manage_layers

'
' Associations between actor and use cases
'
User --> create_shape
User --> select_shape
User --> delete_shape
User --> resize_shape
User --> move_shape
User --> create_layer
User --> manage_layers

'
' Include relationships (must be part of the base use case)
'

' 创建图形前需确保有当前图层，但由系统初始化保证，不涉及其他用例包含

'
' Extend relationships with extension points and conditions
'

' 扩展点 EP1: 图形已被选中并显示控制点 → 改变图形尺寸
' 在选择图形后，当用户拖动控制点或点击放大/缩小按钮时触发改变尺寸
select_shape ..> resize_shape : extend
note on link
  扩展点 EP1：图形已被选中并显示控制点
  触发条件：用户拖动控制点或点击“放大/缩小”按钮
end note

' 扩展点 EP2: 图形已被选中 → 移动图形
' 在选择图形后，当用户在图形内部按下并拖动鼠标时触发移动
select_shape ..> move_shape : extend
note on link
  扩展点 EP2：图形已被选中
  触发条件：用户在已选中图形内部按下鼠标并拖动
end note

' 删除图形依赖于先选择图形，但根据约束不能使用 include
' 约束明确禁止：选择图形 --include--> 删除图形
' 因此使用独立关联，逻辑上依赖但不建模为 include
' 同样，改变图形尺寸和移动图形不能通过 include 从选择图形出发

@enduml
