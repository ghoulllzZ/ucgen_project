@startuml
actor 用户

'
' 基础用例
'
usecase "创建图形" as create_shape
usecase "选择图形" as select_shape
usecase "删除图形" as delete_shape
usecase "改变图形尺寸" as resize_shape
usecase "移动图形" as move_shape
usecase "创建图层" as create_layer
usecase "管理图层" as manage_layer

'
' 关联：用户与基础用例
'
用户 --> create_shape
用户 --> select_shape
用户 --> delete_shape
用户 --> create_layer
用户 --> manage_layer

'
' 扩展关系（extend）
'

' 扩展点 EP1: 图形已被选中并显示控制点，可触发改变尺寸
' 当用户拖动控制点或点击放大/缩小按钮时，触发改变图形尺寸
select_shape ..> resize_shape : extend
note on link
  扩展点 EP1：图形已被选中并显示控制点
  触发条件：拖动控制点 或 点击“放大/缩小”按钮
end note

' 扩展点 EP2: 图形已被选中，可触发移动图形
' 当用户在已选中图形内部按下并拖动鼠标时，触发移动图形
select_shape ..> move_shape : extend
note on link
  扩展点 EP2：图形已被选中
  触发条件：在选中图形内部按下并拖动鼠标
end note

'
' 包含关系（include）
'

' 创建图形必须包含选择图形类型和绘制操作（但根据需求，创建是独立流程）
' 实际上创建图形不依赖于先执行选择图形，故无 include

' 删除图形的前提是已有选中图形，但根据约束禁止 include 选择图形
' 因此改为通过上下文关联，而非强制 include

' 创建图层后需重置图形选择框为矩形，并更新提示
' 但这属于系统内部行为，不构成用户用例间的包含

' 管理图层切换后也重置图形选择框，同样为内部状态更新

'
' 根据【约束】禁止以下 include 关系：
' - 选择图形 --include--> 删除图形（被禁）
' - 选择图形 --include--> 改变图形尺寸（被禁）
' - 选择图形 --include--> 移动图形（被禁）
'
' 故上述三者不能使用 dot notation 或 <<include>> 关联

@enduml
