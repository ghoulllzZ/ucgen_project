@startuml
left to right direction
actor 用户

' 基本用例
usecase "创建图形" as create_shape
usecase "选择图形" as select_shape
usecase "删除图形" as delete_shape
usecase "改变图形尺寸" as resize_shape
usecase "移动图形" as move_shape
usecase "创建图层" as create_layer
usecase "管理图层" as manage_layers

' 用户与用例的关联
用户 --> create_shape
用户 --> select_shape
用户 --> delete_shape
用户 --> resize_shape
用户 --> move_shape
用户 --> create_layer
用户 --> manage_layers

' 用例之间的关系

' 选择图形是改变图形尺寸的前提，且在特定扩展点触发
' 扩展点 EP1：图形已被选中并显示控制点，用户拖动控制点或点击“放大/缩小”按钮时触发
select_shape ..> resize_shape : extend <<extension>>\n<<EP1: 图形已被选中并显示控制点>>
note right of select_shape .. resize_shape
  扩展条件：
  - 用户拖动控制点
  - 或点击“放大/缩小”按钮
end note

' 选择图形是移动图形的前提，且在特定扩展点触发
' 扩展点 EP2：图形已被选中，用户在图形内部按下并拖动时触发
select_shape ..> move_shape : extend <<extension>>\n<<EP2: 图形已被选中>>
note right of select_shape .. move_shape
  扩展条件：
  - 用户在已选中图形内部按下鼠标并拖动
end note

' 删除图形依赖于先选择图形（但根据约束 forbid_include 不使用 include）
' 冲突摘要指出不能有 “选择图形” include “删除图形”，因此不添加该关系
' 尽管逻辑上有关联，但按硬性约束禁止 include 关系

' 其他独立用例之间无 include/extend 关系

@enduml
