@startuml
actor 用户

'
' 启动图形编辑器 是主用例，根据约束必须保留
'
usecase "启动图形编辑器" as UC1
usecase "创建图形" as UC2
usecase "选择图形" as UC3
usecase "删除图形" as UC4
usecase "调整图形尺寸" as UC5
usecase "移动图形" as UC6
usecase "创建新图层" as UC7
usecase "管理图层" as UC8

'
' 强制包含关系：根据约束 must_include
'
' 删除图形 必须包含 选择图形（先选后删）
UC4 <.. UC3 : include
' 调整图形尺寸 必须包含 选择图形（先选后调尺寸）
UC5 <.. UC3 : include
' 移动图形 必须包含 选择图形（先选后移动）
UC6 <.. UC3 : include

'
' 用户与用例的关联
'
用户 --> UC1 : 启动软件
用户 --> UC2 : 创建直线、椭圆、矩形等
用户 --> UC3 : 点击或框选图形
用户 --> UC4 : 点击“删除元素”按钮
用户 --> UC5 : 拖动控制点或使用按钮
用户 --> UC6 : 拖动已选图形
用户 --> UC7 : 点击“新页”按钮
用户 --> UC8 : 点击“下一页”按钮切换图层

'
' 其他用例间的必要依赖（根据需求推导，且不违反 forbid 规则）
'
' 创建新图层时，若图层数 ≤16，则可创建；否则不能 —— 不需要 include
' 管理图层 包含 切换当前图层 的语义，但 “切换当前图层” 被禁止作为独立用例
' 因此 UC8 本身代表图层切换行为，无需进一步分解

'
' extend 关系：根据需求和约束判断是否允许
'
' 无允许的 extend 关系（约束中 forbid_extend 多，且未提供合法 extend）
' 所有潜在 extend 均被禁止或未明确定义条件，故不添加非法 extend

@enduml
