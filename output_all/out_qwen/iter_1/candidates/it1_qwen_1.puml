@startuml
actor 用户 as User

' 软件初始启动时执行的初始化行为
usecase "初始化编辑器" as UC1
User --> UC1 : 启动软件

' 创建图形功能
usecase "创建图形" as UC2
User --> UC2 : 选择并绘制图形
' 创建图形过程中必须进行图形类型选择
' A 执行过程中必须包含 B：用户必须先选择图形类型才能创建
UC2 .> "选择图形类型" as SelectShapeType : include

' 选择图形功能
usecase "选择图形" as UC3
User --> UC3 : 在编辑区点击或框选图形
' 选择图形支持单选、多选和取消选择
' 多选是在拖动鼠标形成矩形区域时触发的选择方式
' extend 表示在特定条件下扩展基本用例
' 当用户拖动鼠标时，触发展开为区域选择模式
' 扩展点：在选择图形时，若拖动鼠标，则执行区域选择
UC3 <.. "区域选择多个图形" as SelectMultiple : extend
' 触发条件：鼠标按下拖动形成虚线矩形区域
note on link
  扩展条件：用户在编辑区按下鼠标并拖动，
  在起始和终止点构成的矩形区域内选择所有图形
end note

' 删除图形功能
usecase "删除图形" as UC4
User --> UC4 : 点击“删除元素”按钮
' 删除前必须已选择图形，否则无法删除
' include 表示删除操作强制依赖于图形已被选择
' A 执行过程中必须包含 B：删除前必须选择图形
UC4 .> UC3 : include
' 因果说明：删除图形必须先选择图形

' 改变图形尺寸功能
usecase "改变图形尺寸" as UC5
User --> UC5 : 拖动控制点或点击放大/缩小按钮
' 尺寸改变可通过两种方式：拖动控制点或使用工具按钮
' 使用放大按钮直接放大所选图形
' 使用缩小按钮直接缩小所选图形
UC5 .> "拖动控制点调整尺寸" as ResizeByCorner : include
UC5 .> "点击放大/缩小按钮" as ZoomButton : include
' 因果说明：改变尺寸必须通过控制点或按钮操作

' 移动图形功能
usecase "移动图形" as UC6
User --> UC6 : 在图形内部按下并拖动
' 移动图形时，图层状态和控制点状态保持不变
' 基本动作无需扩展，直接关联

' 创建图层功能
usecase "创建新图层" as UC7
User --> UC7 : 点击“新页”按钮
' 创建新图层时有约束：最多16个图层
' 超过16个则不能创建，作为扩展条件
UC7 <.. "图层数已达上限" as LayerLimit : extend
' 触发条件：当已有图层数量 ≥ 16 时，禁止创建新图层
note on link
  扩展条件：如果当前图层数量超过16个，
  则无法创建新图层，提示限制
end note
' 创建新图层后自动切换为当前图层，并重置为创建矩形状态
UC7 .> "设置为当前图层" as SetCurrentLayer : include
UC7 .> "重置创建状态为矩形" as ResetToRectangle : include

' 管理图层（切换图层）
usecase "切换图层" as UC8
User --> UC8 : 点击“下一页”按钮
' 切换图层会循环：最后一个切回第一个
' 切换后重置创建状态为矩形
UC8 .> "重置创建状态为矩形" : include
' 因果说明：每次图层切换后都需重置图形选择状态

' 图形提示区域更新提示
usecase "更新提示信息" as UC9
' 所有用例可能影响界面提示
UC1 .> UC9 : include
UC7 .> UC9 : include
UC8 .> UC9 : include
' 因果说明：初始化、新建图层、切换图层均需更新提示区域
' 提示内容如“第一页”、“删除元素”等

' 扩展可能性：根据约束（1）图形编辑器可在创建的图形种类上扩展
' 未来可添加新的图形类型，如三角形、多边形等
' 当前已支持直线、椭圆、矩形，未来可扩展
' 使用 extend 表示未来新增图形类型的可扩展性
"选择图形类型" <.. "选择其他图形类型" as ExtendShapeTypes : extend
note on link
  扩展条件：系统设计支持未来增加图形类型（如三角形、多边形等）
  符合约束：可在创建的图形种类上扩展
end note

@enduml
