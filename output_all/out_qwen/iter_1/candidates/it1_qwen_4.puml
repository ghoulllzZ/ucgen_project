@startuml
actor 用户 as User

'
' 初始化系统状态
usecase "启动图形编辑器" as UC1
User --> UC1

'
' 图形创建相关用例
usecase "创建图形" as UC2
User --> UC2
'
' 初始状态下默认选择矩形
UC1 ..> UC2 : <<include>>
' 启动时默认选择矩形图形

usecase "选择创建的图形类型" as UC2_1
UC2 ..> UC2_1 : <<include>>
' 创建图形前必须选择类型：直线、椭圆、矩形

usecase "动态绘制图形" as UC2_2
UC2 ..> UC2_2 : <<include>>
' 创建过程中必须动态绘制虚线轮廓

'
' 选择图形功能
usecase "选择图形" as UC3
User --> UC3

' 单击图形内部选择单个图形
' 多选：叠加图形点击或拖拽框选
' 点击空白取消选择
UC3 --> UC3 : <<extend>>
' 扩展：在叠加区域点击可选择多个图形（扩展点：图形重叠区域点击）

UC3 --> UC3 : <<extend>>
' 扩展：按下并拖动鼠标形成选择框，选中区域内所有图形（扩展点：拖拽选择）

UC3 --> UC3 : <<extend>>
' 扩展：点击空白区域取消所有选择（扩展点：点击无图形区域）

'
' 删除图形
usecase "删除所选图形" as UC4
User --> UC4
'
' 必须先选择图形才能删除
UC4 ..> UC3 : <<include>>
' 删除前必须已完成图形选择

'
' 改变图形尺寸
usecase "改变图形尺寸" as UC5
User --> UC5
'
' 通过拖动控制点调整尺寸
usecase "拖动控制点调整尺寸" as UC5_1
UC5 ..> UC5_1 : <<include>>
' 改变尺寸的一种方式：拖动控制点

usecase "点击放大/缩小按钮" as UC5_2
UC5 ..> UC5_2 : <<include>>
' 改变尺寸的另一种方式：使用工具按钮

'
' 移动图形
usecase "移动图形" as UC6
User --> UC6
'
' 在图形内部按下并拖动
UC6 ..> UC3 : <<include>>
' 移动前需选择图形

'
' 图层管理功能
usecase "创建新图层" as UC7
User --> UC7
'
' 最多16个图层
UC7 --> UC7 : <<extend>>
' 扩展：当图层数 ≤16 时才可创建（扩展点：图层数未达上限）

'
' 切换图层
usecase "切换当前图层" as UC8
User --> UC8
'
' 点击“下一页”切换，循环到最后返回第一层
' 切换后恢复为创建矩形状态
UC8 ..> UC2_1 : <<include>>
' 切换图层后默认恢复为选择矩形状态

'
' 其他约束说明
' 【约束】图形编辑器可在创建的图形种类上扩展。
usecase "扩展支持的新图形类型" as EXT_GraphType
UC2_1 ..> EXT_GraphType : <<extend>>
' 扩展：未来可添加多边形、曲线等（扩展点：创建图形类型选择）

@enduml
