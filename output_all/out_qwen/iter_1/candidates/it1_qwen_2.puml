@startuml
actor 用户 as User

' 启动时系统自动执行初始化
usecase "启动图形编辑器" as UC1
usecase "显示初始界面" as UC2
User --> UC1
UC1 --> UC2 : <<include>>
' 初始状态：创建图形选择框默认为矩形，创建第一个图层，提示“第一页”

usecase "创建图形" as UC3
User --> UC3
' 用户从选择框选直线、椭圆、矩形，在当前图层拖拽绘制

usecase "选择图形" as UC4
User --> UC4
' 单击图形选择，支持多选和框选，空白点击取消选择

usecase "删除图形" as UC5
User --> UC5
' 先选择图形，再点击“删除元素”按钮删除所选图形

' 删除图形前必须先选择图形
' 因果依赖：删除操作的前提是已有被选中的图形
UC5 --> UC4 : <<include>>

usecase "改变图形尺寸" as UC6
User --> UC6
' 通过拖动控制点或点击“放大”“缩小”按钮调整尺寸

' 改变尺寸前必须选择图形
' 因果依赖：只有被选中的图形才能调整尺寸
UC6 --> UC4 : <<include>>

usecase "移动图形" as UC7
User --> UC7
' 在图形内部按下并拖动以移动位置

' 移动图形前必须选择图形
' 因果依赖：移动操作作用于已选中的图形
UC7 --> UC4 : <<include>>

usecase "创建新图层" as UC8
User --> UC8
' 点击“新页”按钮创建新图层，最多16个

' 新图层创建后自动成为当前图层，并重置为矩形创建状态
' 扩展点：当图层数 ≤15 时允许创建；>15 则无法创建
' 触发条件：用户点击“新页”且图层数未达上限
UC8_ext_max :: "图层数已达16" as EXT8
UC8 ..> EXT8 : <<extend>>
note on link
  扩展条件：图层数量超过16时禁止创建新图层
end note

usecase "切换图层" as UC9
User --> UC9
' 点击“下一页”切换当前图层，循环切换，提示编号

' 切换后重置创建状态为“矩形”
' 因果依赖：切换图层后必须重置绘图工具状态
UC9 --> UC2 : <<include>>
note on link
  包含：切换图层后创建图形选择框恢复为“矩形”
end note

' 图形提示区域始终显示当前页码
usecase "更新图形提示" as UC10
UC2 --> UC10 : <<include>>
UC8 --> UC10 : <<include>>
UC9 --> UC10 : <<include>>
' 启动、新建、切换图层时均需更新提示信息

' 可扩展图形类型（约束条件）
' 当前支持直线、椭圆、矩形，未来可扩展
' 扩展点：在“创建图形”中可添加新图形类型
' 触发条件：系统支持新增图形种类
UC3_ext_shape :: "扩展图形类型" as EXT3
UC3 ..> EXT3 : <<extend>>
note on link
  扩展条件：系统可在创建的图形种类上扩展（如三角形、多边形等）
end note

@enduml
