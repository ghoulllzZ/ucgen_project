@startuml
actor 用户 as User

' 软件初始启动时执行的初始化行为
usecase "初始化编辑器" as UC1
User --> UC1 : 启动软件

' 创建图形功能
usecase "创建图形" as UC2
User --> UC2 : 选择图形类型并绘制
' 初始化过程中必须包含默认图层和提示设置
UC1 --> UC2 : <<include>>
' 图形种类可在未来扩展（约束条件）
' 扩展点：当新增图形类型时，可扩展创建图形功能
UC2 <|-- "支持扩展图形类型" as EXT1 : <<extend>>\n<<扩展点：新增图形类型>>

' 选择图形功能
usecase "选择图形" as UC3
User --> UC3 : 点击或框选图形
UC2 --> UC3 : <<include>> ' 创建后通常需要选择
' 可多选或取消选择
' 包含删除、改变尺寸、移动等操作的前提
UC3 --> "删除图形" as UC4 : <<include>>
UC3 --> "改变图形尺寸" as UC5 : <<include>>
UC3 --> "移动图形" as UC6 : <<include>>

' 删除图形功能
usecase "删除图形" as UC4
User --> UC4 : 点击“删除元素”按钮
' 必须先选择图形才能删除
' 因果依赖：未选择则无法删除
UC3 --> UC4 : <<include>>

' 改变图形尺寸功能
usecase "改变图形尺寸" as UC5
User --> UC5 : 拖动控制点或点击放大/缩小按钮
' 放大缩小按钮直接触发尺寸变化
' 包含通过按钮进行缩放操作
UC5 --> "使用放大/缩小按钮" as INC1 : <<include>>
' 使用控制点拖动是基本方式
' 按钮操作是对该功能的补充
INC1 : 提供快捷尺寸调整

' 移动图形功能
usecase "移动图形" as UC6
User --> UC6 : 在图形内部拖动
' 保持图层与控制状态不变
' 编辑器整体移动时状态持续
' 延伸场景：在复杂UI环境中移动编辑器
' 触发条件：用户拖动整个编辑器窗口
UC6 <|-- "保持状态跨编辑器移动" as EXT2 : <<extend>>\n<<触发条件：编辑器被移动>>

' 创建图层功能
usecase "创建新图层" as UC7
User --> UC7 : 点击“新页”按钮
' 最多创建16个图层，超限则不可创建
' 扩展点：达到图层上限时阻止创建
UC7 <|-- "限制图层数量≤16" as EXT3 : <<extend>>\n<<扩展点：图层数≥16>>
' 新图层创建后自动设为当前图层，并初始化为矩形创建状态
UC7 --> "管理图层" as UC8 : <<include>> ' 创建后常伴随切换或管理

' 管理图层（切换图层）
usecase "管理图层" as UC8
User --> UC8 : 点击“下一页”按钮切换图层
' 切换到下一个图层，最后层回绕至第一层
' 每次切换后重置为创建矩形状态
' 初始化图层状态是管理的一部分
UC8 --> UC2 : <<include>> ' 切换后进入创建矩形状态

' 非功能性需求相关扩展说明
' 约束：图形种类可扩展
note right of EXT1
  【约束】图形编辑器可在创建的图形种类上扩展。
  例如：未来可添加多边形、曲线等。
end note

@enduml
