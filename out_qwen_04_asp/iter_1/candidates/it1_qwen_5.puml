@startuml
actor 用户 as User

'
' 初始化与启动
'
usecase "启动图形编辑器" as UC1
User --> UC1 : 启动软件
'
' 创建图形相关
'
usecase "创建图形" as UC2
User --> UC2 : 选择图形类型并绘制
'
' 选择图形
'
usecase "选择图形" as UC3
User --> UC3 : 在编辑区域选择图形
'
' 删除图形
'
usecase "删除图形" as UC4
User --> UC4 : 点击删除按钮删除选中图形
'
' 改变图形尺寸
'
usecase "改变图形尺寸" as UC5
User --> UC5 : 拖动控制点或使用放大/缩小按钮
'
' 移动图形
'
usecase "移动图形" as UC6
User --> UC6 : 拖动已选图形
'
' 图层管理
'
usecase "创建新图层" as UC7
User --> UC7 : 点击“新页”按钮
'
usecase "切换图层" as UC8
User --> UC8 : 点击“下一页”按钮切换当前图层

'
' 关联关系
'

'
' 包含关系 (include)
'

' 启动时必须初始化界面状态
' 启动时显示默认矩形、创建第一图层、提示第一页
UC1 .> UC7 : <<include>>\n(自动创建第一个图层)

' 创建图形前必须处于图形选择状态，且依赖于初始状态
' 创建图形必须在当前图层上进行
UC2 .> UC8 : <<include>>\n(确保当前图层有效)

' 选择图形是删除、移动、缩放的前提
UC4 .> UC3 : <<include>>\n(必须先选择图形才能删除)
UC5 .> UC3 : <<include>>\n(必须先选择图形才能改变尺寸)
UC6 .> UC3 : <<include>>\n(必须先选择图形才能移动)

'
' 扩展关系 (extend)
'

' 当图层数 ≤ 16 时才允许创建新图层
' 扩展点：点击“新页”按钮
' 触发条件：当前图层数 < 16
UC7 ..> UC8 : <<extend>>\n{扩展点: 点击“新页”}\n{条件: 图层数 < 16}

' 当图层数 = 16 时禁止创建
' 但根据约束，不建模禁止行为，仅通过扩展条件控制

' 图形提示区域的状态更新为公共行为（隐含在多个用例中）
' 不单独建模为用例，由其他用例触发

@enduml
