@startuml
actor 用户 as User

'
usecase "启动图形编辑器" as 启动图形编辑器
usecase "创建图形" as 创建图形
usecase "选择图形" as 选择图形
usecase "删除图形" as 删除图形
usecase "改变图形尺寸" as 改变图形尺寸
usecase "移动图形" as 移动图形
usecase "创建新图层" as 创建新图层
usecase "切换图层" as 切换图层

'
User --> 启动图形编辑器
User --> 创建图形
User --> 选择图形
User --> 删除图形
User --> 改变图形尺寸
User --> 移动图形
User --> 创建新图层
User --> 切换图层

'
' 选择图形功能内部包含自身，表示其多态或递归选择行为（如单选/多选统一为选择）'
选择图形 ..> 选择图形 : <<include>>

'
' 创建图形必须在当前图层上进行，而图层存在是前提'
启动图形编辑器 ..> 创建图形 : <<include>>

'
' 删除图形前必须先选择图形'
选择图形 ..> 删除图形 : <<include>>

'
' 改变图形尺寸需先选择图形'
选择图形 ..> 改变图形尺寸 : <<include>>

'
' 移动图形需先选择图形'
选择图形 ..> 移动图形 : <<include>>

'
' 创建新图层后自动成为当前图层，并初始化状态'
创建新图层 ..> 切换图层 : <<extend>>
' 当新图层被创建时，扩展切换图层以设置其为当前层 '

'
' 图层切换后重置创建图形状态为矩形'
切换图层 ..> 创建图形 : <<extend>>
' 切换图层后，扩展创建图形功能以重置默认形状为矩形 '

@enduml
