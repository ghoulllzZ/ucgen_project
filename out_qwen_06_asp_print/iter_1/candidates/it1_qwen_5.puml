@startuml
actor 用户

'
' 初始化与启动
'
usecase "启动图形编辑器" as UC1
用户 --> UC1
'
' 图形操作相关用例
'
usecase "创建图形" as UC2
用户 --> UC2
'
' 选择图形功能包含单选、多选和取消选择
'
usecase "选择图形" as UC3
用户 --> UC3
'
' 删除所选图形
'
usecase "删除图形" as UC4
用户 --> UC4
'
' 改变图形尺寸：通过控制点拖动或使用放大/缩小按钮
'
usecase "改变图形尺寸" as UC5
用户 --> UC5
'
' 移动图形位置
'
usecase "移动图形" as UC6
用户 --> UC6
'
' 图层管理功能
'
usecase "创建新图层" as UC7
用户 --> UC7
'
usecase "切换图层" as UC8
用户 --> UC8

'
' 关联关系
'
用户 --> UC1
用户 --> UC2
用户 --> UC3
用户 --> UC4
用户 --> UC5
用户 --> UC6
用户 --> UC7
用户 --> UC8

'
' 包含关系（include）：强制依赖
'
' 启动时必须初始化图层和提示信息
UC1 ..> UC7 : <<include>>
' '启动编辑器' 必须包含 '创建第一个图层'

UC1 ..> UC3 : <<include>>
' '启动编辑器' 必须初始化选择状态（无图形被选）

'
' 选择图形是删除的前提
UC4 ..> UC3 : <<include>>
' 删除图形前必须先选择图形

'
' 改变尺寸和移动都依赖于先选择图形
UC5 ..> UC3 : <<include>>
' 改变图形尺寸前必须选择图形

UC6 ..> UC3 : <<include>>
' 移动图形前必须选择图形

'
' 创建图形必须在当前图层上进行
UC2 ..> UC8 : <<include>>
' 创建图形需依赖当前图层存在，由切换图层确保状态

'
' 切换图层后重置图形创建状态为矩形
UC8 ..> UC2 : <<include>>
' 切换图层后默认进入创建矩形状态

'
' extend 关系：扩展用例在特定条件下触发
'
' 当图层数未达上限时才可创建新图层
UC7 ..> UC8 : <<extend>>
' 扩展点: 图层数量 ≤ 16 时允许创建并自动切换到新图层

' 当鼠标在空白区域点击时，取消所有选择
UC3 ..> UC3 : <<extend>>
' 扩展点: 在编辑区空白处点击 → 取消所有已选图形

' 多选操作是对基本选择的扩展
UC3 ..> UC3 : <<extend>>
' 扩展点: 拖拽形成虚线框或点击嵌套区域 → 多选图形

@enduml
